<!DOCTYPE HTML>
<html>
<head>
<title>Reminiscens</title>
<script src="cordova-2.4.0.js"></script>
<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
<script src="http://code.jquery.com/jquery.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>

<script type="text/javascript" src="js/json/json2.js"></script>
<script type="text/javascript" src="js/sha1.js"></script>
<script>  	
     function onLoad(){
          document.addEventListener("deviceready", onDeviceReady, true);
     }
     function onDeviceReady(){
          navigator.notification.alert("PhoneGap is working!!");
     }
	function Redirect()
	{
		location.href = "registra.html";
	}
	function Login()
	{		
		var passSha1 = $.sha1($("#password").val());
		var sessionData = new Object;
		sessionData.name = "reminiscens";
		sessionData.authString = $("#email").val() + "!_-_!" + passSha1; 
		
		var xhr = new XMLHttpRequest();		
		xhr.open('POST', 'http://reminiscens.apiary.io/api/session');		
		xhr.setRequestHeader("Content-Type", "application/json");		
		xhr.onreadystatechange = function () {
  			if (this.readyState == 4) {
    			if (typeof cb !== "undefined") {
					cb(this);
    			}
			}
   			else {
      			alert('Status: '+this.status+'\nHeaders: '+JSON.stringify(this.getAllResponseHeaders())+'\nBody: '+this.		responseText);
    		}
  		};		
		xhr.send("{  \n    \"Service\":{\n        \"name\": \"reminiscens\"\n        \"authString\": \"" + sessionData.authString + "\"  \n    }\n}");
	}
</script>

<style>
body {
	background-color:#CCC;
	background-repeat: repeat-y;
}
#divRoot{
	width: 450px;
	height: 240px;
	margin: auto;
	margin-top:20px;
	-moz-border-radius: 10px 10px 10px 10px;
	-webkit-border-radius: 10px 10px 10px 10px;
	border-radius: 10px 10px 10px 10px;
	background-color:#FFF;
}
.cont{
	text-align: center;
	height: 70px;
	width: 450px;
	vertical-align: central;
	margin: auto;
}

</style>
</head>
<body>
<div id="divRoot">
  <div class="cont" style="padding-left:20px;">
    <h3 style="color:#999; float:left;">Email:</h3>
    <input id="email" style="float:left; margin-top:15px; margin-left:60px;" type="text" placeholder="email" autofocus>
    </div>
  <div class="cont" style="padding-left:20px;height:100px;">
    <h3 style="color:#999; float:left;">Password:</h3>
    <input id="password" style="float:left; margin-top:15px; margin-left:10px;" type="text" placeholder="password">
  </div>
  <div class="cont">
  	<button onClick="Redirect()" class="btn btn-primary">Registrati</button>
    <button onClick="Login()" class="btn btn-primary">Login</button>
  </div>
</div>
</html>